"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Callout = void 0;
var react_1 = __importDefault(require("react"));
var styled_components_1 = __importDefault(require("styled-components"));
var react_spring_1 = require("react-spring");
var CalloutContainerDiv = styled_components_1.default(react_spring_1.animated.div)(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  position: absolute;\n  left: ", ";\n  top: ", ";\n  transform: ", ";\n  padding: ", ";\n  z-index: 10;\n  pointer-events: auto;\n"], ["\n  position: absolute;\n  left: ", ";\n  top: ", ";\n  transform: ", ";\n  padding: ", ";\n  z-index: 10;\n  pointer-events: auto;\n"])), function (props) { return "" + props.ax; }, function (props) { return "" + props.ay; }, function (props) { return "translate(calc(-1 * " + props.halign + "), calc(-1 * " + props.valign + "));"; }, function (props) { return "" + props.arrowpad; });
var CalloutDiv = styled_components_1.default.div(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  position: relative;\n  box-sizing: border-box;\n  min-width: 8rem;\n  ", ";\n  padding: 0.75rem 1rem;\n  ", ";\n  ", ";\n  text-align: center;\n  user-select: none;\n  color:#fff;\n  z-index: 10;\n"], ["\n  position: relative;\n  box-sizing: border-box;\n  min-width: 8rem;\n  ", ";\n  padding: 0.75rem 1rem;\n  ", ";\n  ", ";\n  text-align: center;\n  user-select: none;\n  color:#fff;\n  z-index: 10;\n"])), function (props) { return props.borderRadius !== undefined && "border-radius: " + props.borderRadius; }, function (props) { return "background-color: " + props.backgroundColor; }, function (props) { return props.useShadow && 'box-shadow: 0 0.2rem 0.5rem #00000040'; });
var ArrowDiv = styled_components_1.default.div(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n  position: absolute;\n  left: ", ";\n  top: ", ";\n\n  transform: translate(-50%, -50%) rotate(45deg);\n  width: ", ";\n  height: ", ";\n  ", ";\n  z-index: 10;\n"], ["\n  position: absolute;\n  left: ", ";\n  top: ", ";\n\n  transform: translate(-50%, -50%) rotate(45deg);\n  width: ", ";\n  height: ", ";\n  ", ";\n  z-index: 10;\n"])), function (props) { return "calc(" + props.ax + " - " + props.offsetX + ")"; }, function (props) { return "calc(" + props.ay + " - " + props.offsetY + ")"; }, function (props) { return "" + props.size; }, function (props) { return "" + props.size; }, function (props) { return "background-color: " + props.backgroundColor; });
var ArrowShadowDiv = styled_components_1.default.div(templateObject_4 || (templateObject_4 = __makeTemplateObject(["\n  position: absolute;\n  left: ", ";\n  top: ", ";\n\n  transform: translate(-50%, -50%) rotate(45deg);\n  width: ", ";\n  height: ", ";\n  background-color: #00000000;\n  box-shadow: 0 0.2rem 0.5rem #00000040;\n  z-index: 9;\n"], ["\n  position: absolute;\n  left: ", ";\n  top: ", ";\n\n  transform: translate(-50%, -50%) rotate(45deg);\n  width: ", ";\n  height: ", ";\n  background-color: #00000000;\n  box-shadow: 0 0.2rem 0.5rem #00000040;\n  z-index: 9;\n"])), function (props) { return "calc(" + props.ax + " - " + props.offsetX + ")"; }, function (props) { return "calc(" + props.ay + " - " + props.offsetY + ")"; }, function (props) { return "" + props.size; }, function (props) { return "" + props.size; });
var Callout = function (_a) {
    var children = _a.children, _b = _a.onClick, onClick = _b === void 0 ? function () { } : _b, _c = _a.sourceAnchors, sourceAnchors = _c === void 0 ? { x: '50%', y: '5%' } : _c, _d = _a.destAnchors, destAnchors = _d === void 0 ? { x: '50%', y: '100%' } : _d, _e = _a.visible, visible = _e === void 0 ? true : _e, _f = _a.arrowSize, arrowSize = _f === void 0 ? { value: 0.5, unit: 'rem' } : _f, _g = _a.useShadow, useShadow = _g === void 0 ? false : _g, _h = _a.backgroundColor, backgroundColor = _h === void 0 ? '#000' : _h, borderRadius = _a.borderRadius;
    var springProps = react_spring_1.useSpring({
        v: visible ? 1 : 0,
        config: { tension: 200 },
    });
    return (react_1.default.createElement(CalloutContainerDiv, { ax: sourceAnchors.x, ay: sourceAnchors.y, halign: destAnchors.x, valign: destAnchors.y, arrowpad: "" + arrowSize.value + arrowSize.unit, onClick: function () { return onClick(); }, style: {
            visibility: springProps.v.interpolate(function (x) { return x > 0 ? 'visible' : 'hidden'; }),
            clipPath: springProps.v.interpolate(function (x) { return "circle(" + x * 100 + "% at center)"; }),
        } },
        react_1.default.createElement(CalloutDiv, { useShadow: useShadow, backgroundColor: backgroundColor, borderRadius: borderRadius }, children),
        react_1.default.createElement(ArrowDiv, { backgroundColor: backgroundColor, size: "" + arrowSize.value * Math.sqrt(2) + arrowSize.unit, ax: "50%", ay: "100%", offsetX: "0rem", offsetY: "" + arrowSize.value + arrowSize.unit }),
        useShadow && react_1.default.createElement(ArrowShadowDiv, { size: "" + arrowSize.value * Math.sqrt(2) + arrowSize.unit, ax: "50%", ay: "100%", offsetX: "0rem", offsetY: "" + arrowSize.value + arrowSize.unit })));
};
exports.Callout = Callout;
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;
//# sourceMappingURL=Callout.js.map